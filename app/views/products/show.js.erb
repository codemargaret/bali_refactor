$('#product_details_link<%= @product.id %>').hide().after('<%= j render("details") %>')

$('#hide<%= @product.id %>').click(function() {
  $('#product_details_link<%= @product.id %>').show();
  $('#detail_div<%= @product.id %>').hide();
});
